/*! Groceries - v0.0.1 - 2013-09-28
* Copyright (c) 2013 David Higgins <higginsd@zoulcreations.com>;
 Licensed MIT */
var pgApp={initialize:function(){this.bindEvents()},bindEvents:function(){"device"in window?document.addEventListener("deviceready",this.onDeviceReady,!1):this.onDeviceReady()},onDeviceReady:function(){angular.bootstrap(document,["Grocery"])}};app=angular.module("Grocery",["LocalStorageModule","ngMobile"]),app.config(function(a){a.urlSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|tel):/)}),app.controller("groceryController",function(a,b,c,d){function e(){var a=b.current.action||"list";switch(a){case"add":g.create();break;case"view":g.view(c.entityId);break;default:g.list()}}var f={remove:function(b){d.remove(b.title),a.groceries=f.getGroceries()},update:function(b){console.log("groceryController.list().update()",b);var c=d.get(b.title);c&&(c.title=b.title,c.checked=b.checked),d.remove(b.title),d.add(b.title,b),a.groceries=f.getGroceries()},save:function(b){console.log("groceryController.list().save()",b);var c={title:b,checked:!1};return d.set(b,c),a.groceries.push(c),a.groceries=f.getGroceries(),null},getGroceries:function(){for(var a=[],b=d.keys(),c=0;c<b.length;c++){var e=d.get(b[c]);a.push(e)}return a}},g={create:function(){console.log("groceryController.create()"),a.grocery={},a.save=function(){console.log("$scope.grocery",a.grocery),d.add(a.grocery.title,a.grocery.description)}},view:function(a){console.log("groceryController.view()",a)},list:function(){console.log("groceryController.list()"),a.groceries=f.getGroceries(),a.remove=f.remove,a.update=f.update,a.save=f.save}};return e(),g}),app.config(["$routeProvider",function(a){console.log("router.config()"),a.when("/",{templateUrl:"views/list.html",controller:"groceryController",action:"list"}).when("/new",{templateUrl:"views/new.html",controller:"groceryController",action:"add"}).when("/view/:entityId",{templateUrl:"views/view.html",controller:"groceryController",action:"view"}).otherwise({redirectTo:"/"})}]);